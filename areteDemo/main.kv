<LoginScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20

        Label:
            text: "Login"
            font_size: 32

        TextInput:
            id: email
            hint_text: "Email"
            multiline: False

        TextInput:
            id: password
            hint_text: "Password"
            password: True
            multiline: False

        Label:
            id: message
            text: ""
            color: 1,0,0,1

        Button:
            text: "Login"
            on_release: root.attempt_login(email.text, password.text)

        Button:
            text: "Sign Up"
            on_release: app.root.current = "signup"

<SignupScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20

        Label:
            text: "Create Account"
            font_size: 32

        TextInput:
            id: email
            hint_text: "Email"
            multiline: False

        TextInput:
            id: password
            hint_text: "Password"
            password: True
            multiline: False

        TextInput:
            id: first_name
            hint_text: "First Name"
            multiline: False

        TextInput:
            id: last_name
            hint_text: "Last Name"
            multiline: False

        Label:
            id: message
            text: ""
            color: 1,0,0,1

        Button:
            text: "Sign Up"
            on_release: root.attempt_signup(email.text, password.text, first_name.text, last_name.text)

        Button:
            text: "Back to Login"
            on_release: app.root.current = "login"

<MenuScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: 40
        spacing: 20

        Label:
            text: "Main Menu"
            font_size: 32

        Button:
            text: "Profile"
            on_release: app.root.current = "profile"
        Button:
            text: "Stats"
            on_release: app.root.current = "stats"
        Button:
            text: "Info"
            on_release: app.root.current = "info"
        Button:
            text: "Settings"
            on_release: app.root.current = "settings"
        Button:
            text: "Game"
            on_release: app.root.current = "game"
        Button:
            text: "Logout"
            on_release: app.root.current = "login"

<ProfileScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: 40
        spacing: 20

        Label:
            text: "Profile"
            font_size: 32

        Label:
            text: "Email: " + root.user_email
            size_hint_y: None
            height: 30

        TextInput:
            id: first_name
            text: root.user_first_name
            hint_text: "First Name"
            multiline: False

        TextInput:
            id: last_name
            text: root.user_last_name
            hint_text: "Last Name"
            multiline: False

        # [Restore] Color selection buttons
        Label:
            text: "Choose Character Color:"
            font_size: 20
            size_hint_y: None
            height: 40
            color: 0.8, 0.8, 0.8, 1

        BoxLayout:
            size_hint_y: None
            height: 50
            spacing: 20
            
            Button:
                text: "White"
                background_normal: ''
                background_color: 0.9, 0.9, 0.9, 1
                color: 0, 0, 0, 1
                on_release: app.player_color = [1, 1, 1, 1]
            
            Button:
                text: "Red"
                background_normal: ''
                background_color: 1, 0.3, 0.3, 1
                on_release: app.player_color = [1, 0.3, 0.3, 1]

            Button:
                text: "Blue"
                background_normal: ''
                background_color: 0.3, 0.5, 1, 1
                on_release: app.player_color = [0.3, 0.5, 1, 1]

            Button:
                text: "Green"
                background_normal: ''
                background_color: 0.3, 1, 0.3, 1
                on_release: app.player_color = [0.3, 1, 0.3, 1]

        Button:
            text: "Save Name Changes"
            on_release: root.save_profile(first_name.text, last_name.text)

        Button:
            text: "Back"
            on_release: app.root.current = "menu"

<SettingsScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: 40
        spacing: 20

        Label:
            text: "Settings"
            font_size: 32

        Button:
            text: "Delete Account"
            on_release: root.delete_account()

        Button:
            text: "Back"
            on_release: app.root.current = "menu"

<StatsScreen>:
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "Stats (coming soon)"
        Button:
            text: "Back"
            on_release: app.root.current = "menu"

<InfoScreen>:
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "Info Page (coming soon)"
        Button:
            text: "Back"
            on_release: app.root.current = "menu"

<GameScreen>:
    FloatLayout:
        id: game_container
        Button:
            size_hint: None, None
            size: 100, 50
            pos_hint: {"x": 0, "top": 1}
            text: "Back"
            on_release: app.root.current = "menu"

<ReflectionScreen>:
    # Neutral screen (no game imagery) for memory/recognition questions
    BoxLayout:
        orientation: "vertical"
        padding: 60
        spacing: 24

        Label:
            text: "Quick reflection"
            font_size: 28
            size_hint_y: None
            height: 40

        BoxLayout:
            id: quiz_box
            orientation: "vertical"
            spacing: 16
            opacity: 1
            disabled: False

            Label:
                id: progress_label
                text: "Question 1 of 5"
                font_size: 16
                size_hint_y: None
                height: 28

            Label:
                id: question_label
                text: ""
                font_size: 22
                text_size: self.size
                halign: "center"
                valign: "middle"

            BoxLayout:
                orientation: "vertical"
                spacing: 10
                size_hint_y: None
                height: 200
                Button:
                    id: choice_0
                    text: ""
                    on_release: root.on_choice(0)
                Button:
                    id: choice_1
                    text: ""
                    on_release: root.on_choice(1)
                Button:
                    id: choice_2
                    text: ""
                    on_release: root.on_choice(2)
                Button:
                    id: choice_3
                    text: ""
                    on_release: root.on_choice(3)

        BoxLayout:
            id: done_box
            orientation: "vertical"
            spacing: 20
            opacity: 0
            disabled: True

            Label:
                id: done_label
                text: "Thanks!"
                font_size: 20
                text_size: self.size
                halign: "center"
                valign: "middle"

            Button:
                id: done_back_btn
                text: "Back to game"
                size_hint_y: None
                height: 50
                on_release: root.go_back()